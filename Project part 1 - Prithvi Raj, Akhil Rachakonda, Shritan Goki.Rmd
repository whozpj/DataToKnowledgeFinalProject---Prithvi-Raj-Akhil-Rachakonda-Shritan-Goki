---
title: "Project Part 1" 

fontsize: 12pt
geometry: margin=1in
urlcolor: black
output: pdf_document
header-includes:
- \usepackage{setspace}
- \onehalfspacing
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, highlight=FALSE)
```

```{r, echo=FALSE, warning=FALSE, message=FALSE}
# Load required packages
library(tidyverse)
library(knitr)

# Read in all four seasons of NBA data
nba_2019 <- read_csv("NBA2019.csv", show_col_types = FALSE) %>% mutate(Season = 2019)
nba_2020 <- read_csv("NBA2020.csv", show_col_types = FALSE) %>% mutate(Season = 2020)
nba_2021 <- read_csv("NBA2021.csv", show_col_types = FALSE) %>% mutate(Season = 2021)
nba_2022 <- read_csv("NBA2022.csv", show_col_types = FALSE) %>% mutate(Season = 2022)

# Combine all seasons
nba_data <- bind_rows(nba_2019, nba_2020, nba_2021, nba_2022)

# Clean data: remove rows with missing critical values
nba_clean <- nba_data %>%
  filter(!is.na(PTS), !is.na(FGA), !is.na(`3P`), FGA > 0)

# Calculate league-wide statistics by season
season_stats <- nba_clean %>%
  group_by(Season) %>%
  summarise(
    Total_Points = sum(PTS, na.rm = TRUE),
    Total_3P_Points = sum(`3P` * 3, na.rm = TRUE),
    Total_FGA = sum(FGA, na.rm = TRUE),
    Total_FG = sum(FG, na.rm = TRUE),
    Prop_3P_Points = Total_3P_Points / Total_Points,
    Points_Per_FGA = Total_Points / Total_FGA,
    .groups = "drop"
  )
```

## Introduction

The National Basketball Association (NBA) has undergone a dramatic transformation in offensive strategy over the past two decades. The proliferation of three-point shooting, popularized by teams like the Golden State Warriors, has fundamentally changed how the game is played. This shift raises important questions about the evolution of NBA offense and whether these changes have translated to improved scoring efficiency.

This report explores two key research questions:

1. **Three-Point Emphasis**: Has the proportion of total points scored from three-point field goals increased in the NBA from 2019 to 2022?

2. **Scoring Efficiency**: Has overall scoring efficiency, measured as points per field goal attempt, improved among NBA teams from 2019 to 2022?

While broader historical trends (2000-2023) would provide more comprehensive insights, this analysis focuses on recent seasons (2019-2022) for which detailed player-level data is readily available. This four-season window captures the modern NBA era and provides sufficient data to identify meaningful trends. This is an exploratory analysis only, with no statistical inference performed.

## Data Summary

### Data Source and Collection

The data used in this analysis comes from Basketball Reference (https://www.basketball-reference.com/), a comprehensive repository of NBA statistics maintained by Sports Reference LLC. The dataset includes player-level per-game statistics for four NBA seasons: 2018-19 (labeled 2019), 2019-20 (2020), 2020-21 (2021), and 2021-22 (2022).

These data represent a **population** of all NBA players who appeared in games during these seasons. Basketball Reference compiles official statistics recorded by the NBA during each game, including field goals made and attempted, three-pointers made and attempted, points scored, and various other performance metrics.

### Data Modifications

After collecting the raw data, several modifications were made:

1. **Season labeling**: Each dataset was tagged with its corresponding season year for tracking trends over time.

2. **Data combination**: All four season datasets were merged into a single dataframe to facilitate year-over-year comparisons.

3. **Missing data removal**: Players with missing values for critical variables (points, field goal attempts, three-pointers) were excluded from analysis, as these represent incomplete records.

4. **Zero-attempt filtering**: Players with zero field goal attempts were removed to prevent division-by-zero errors when calculating efficiency metrics.

These cleaning steps were necessary to ensure accurate calculations and meaningful comparisons. The resulting dataset includes `r nrow(nba_clean)` player-season observations across four years.

### Potential Data Issues

Several potential issues should be noted:

1. **Player-level vs. team-level**: The data are at the player level, but our research questions focus on league-wide trends. Aggregation may obscure team-specific strategies.

2. **COVID-19 impact**: The 2020 and 2021 seasons were affected by the COVID-19 pandemic, resulting in shortened schedules, altered game conditions, and potential statistical anomalies.

3. **Sample bias**: Only players who appeared in games are included. Injured players and those on rosters who did not play are excluded, potentially biasing efficiency statistics upward.

4. **Per-game vs. total statistics**: The data represent per-game averages, which are then summed across players. This approach weights players by games played, which may differ from pure team totals.

Despite these limitations, the data appropriately address the research questions because they capture comprehensive offensive statistics across multiple seasons, enabling calculation of both three-point scoring proportion and overall scoring efficiency at the league level.


## Exploratory Analysis

### Numerical Summary 1: Season-by-Season Statistics

```{r, echo=FALSE}
season_summary <- season_stats %>%
  select(Season, Total_Points, Total_3P_Points, Total_FGA, 
         Prop_3P_Points, Points_Per_FGA) %>%
  mutate(
    Prop_3P_Points = round(Prop_3P_Points, 4),
    Points_Per_FGA = round(Points_Per_FGA, 3)
  )

kable(season_summary, 
      col.names = c("Season", "Total Points", "3P Points", "Total FGA", 
                    "Prop. from 3P", "Pts/FGA"),
      caption = "League-wide scoring statistics by season",
      format.args = list(big.mark = ","))
```

### Numerical Summary 2: Change Over Time

```{r, echo=FALSE}
change_stats <- data.frame(
  Metric = c("Proportion from 3-Pointers", "Points per FGA"),
  `2019` = c(season_stats$Prop_3P_Points[1], season_stats$Points_Per_FGA[1]),
  `2022` = c(season_stats$Prop_3P_Points[4], season_stats$Points_Per_FGA[4]),
  Change = c(
    season_stats$Prop_3P_Points[4] - season_stats$Prop_3P_Points[1],
    season_stats$Points_Per_FGA[4] - season_stats$Points_Per_FGA[1]
  ),
  Percent_Change = c(
    ((season_stats$Prop_3P_Points[4] - season_stats$Prop_3P_Points[1]) / 
       season_stats$Prop_3P_Points[1]) * 100,
    ((season_stats$Points_Per_FGA[4] - season_stats$Points_Per_FGA[1]) / 
       season_stats$Points_Per_FGA[1]) * 100
  )
)

kable(change_stats, 
      col.names = c("Metric", "2019 Value", "2022 Value", 
                    "Absolute Change", "% Change"),
      digits = 4,
      caption = "Change in key metrics from 2019 to 2022")
```

### Graphical Summary 1: Proportion of Points from Three-Pointers

```{r, echo=FALSE, fig.width=7, fig.height=4, fig.align='center'}
ggplot(season_stats, aes(x = Season, y = Prop_3P_Points)) +
  geom_line(color = "#1f77b4", linewidth = 1.2) +
  geom_point(color = "#1f77b4", size = 3) +
  geom_text(aes(label = sprintf("%.2f%%", Prop_3P_Points * 100)), 
            vjust = -1, size = 3.5) +
  scale_x_continuous(breaks = c(2019, 2020, 2021, 2022)) +
  scale_y_continuous(labels = scales::percent_format(accuracy = 0.1),
                     limits = c(0.30, 0.39)) +
  labs(
    title = "Proportion of Total Points from Three-Pointers (2019-2022)",
    x = "Season",
    y = "Proportion of Points from 3P",
    caption = "Data source: Basketball Reference"
  ) +
  theme_minimal() +
  theme(
    plot.title = element_text(face = "bold", size = 12),
    axis.title = element_text(size = 10),
    panel.grid.minor = element_blank()
  )
```

### Graphical Summary 2: Scoring Efficiency Over Time

```{r, echo=FALSE, fig.width=7, fig.height=4, fig.align='center'}
ggplot(season_stats, aes(x = Season, y = Points_Per_FGA)) +
  geom_line(color = "#ff7f0e", linewidth = 1.2) +
  geom_point(color = "#ff7f0e", size = 3) +
  geom_text(aes(label = sprintf("%.3f", Points_Per_FGA)), 
            vjust = -1, size = 3.5) +
  scale_x_continuous(breaks = c(2019, 2020, 2021, 2022)) +
  scale_y_continuous(limits = c(1.20, 1.26)) +
  labs(
    title = "NBA Scoring Efficiency: Points per Field Goal Attempt (2019-2022)",
    x = "Season",
    y = "Points per Field Goal Attempt",
    caption = "Data source: Basketball Reference"
  ) +
  theme_minimal() +
  theme(
    plot.title = element_text(face = "bold", size = 12),
    axis.title = element_text(size = 10),
    panel.grid.minor = element_blank()
  )
```

## Conclusions

### Three-Point Proportion Trends

The data reveal a clear upward trend in the proportion of total points scored from three-point field goals between 2019 and 2022. In the 2019 season, approximately 31.6% of all points came from three-pointers. This proportion increased substantially to 33.3% in 2020, then stabilized at 33.4% in 2021 and 33.5% in 2022, representing an overall absolute increase of 1.9 percentage points and a relative increase of 6.0% from 2019 to 2022.

**Statistical interpretation**: The trend shows a notable jump between 2019 and 2020 (from 0.316 to 0.333), followed by smaller incremental increases in subsequent years (0.334 in 2021, 0.335 in 2022). This pattern suggests that a significant shift in offensive strategy occurred between 2019-2020, with the new approach becoming the norm in subsequent seasons.

**Contextual meaning**: This trend confirms that NBA teams are increasingly emphasizing three-point shooting as a central component of their offensive systems. The shift makes mathematical sense: three-pointers are worth 50% more than two-pointers, so even with slightly lower shooting percentages, they can be more efficient. Teams are recognizing this and adjusting their shot selection accordingly. This evolution reflects broader strategic changes, including increased floor spacing, positionless basketball, and the influence of analytics departments.

### Scoring Efficiency Trends

The analysis shows a more complex pattern for overall scoring efficiency (points per field goal attempt). Starting at 1.22 points per FGA in 2019, efficiency increased slightly to 1.23 in 2020 (a 0.82% increase) and peaked at 1.24 in 2021 (a 1.64% increase from 2019). However, efficiency declined back to 1.22 in 2022, returning to the 2019 baseline. The net change from 2019 to 2022 is effectively zero, with no sustained improvement in scoring efficiency over this period.

**Statistical interpretation**: Unlike the three-point proportion, scoring efficiency does not show a sustained upward trend. The peak efficiency occurred in 2021, but the 2022 season saw efficiency return to 2019 levels. This pattern suggests that any efficiency gains in the middle years were temporary rather than representing a permanent strategic improvement.

**Contextual meaning**: The temporary improvement in 2021 (peak efficiency of 1.24) followed by decline in 2022 back to 2019 levels suggests that the increased emphasis on three-point shooting has not translated into sustained scoring efficiency gains. While three-pointers should theoretically improve efficiency (worth 50% more than two-pointers), NBA defenses have adapted to defend the perimeter more aggressively. The 2022 return to baseline efficiency indicates that defensive adjustments, rule changes affecting physicality, or officiating patterns may have counteracted the theoretical advantage of increased three-point attempts. This finding reveals an important tension: teams are taking more three-pointers, but the league-wide efficiency remains stable, suggesting a strategic equilibrium between offense and defense.

### Summary

This exploratory analysis provides evidence of divergent trends in NBA offense from 2019 to 2022. The proportion of points from three-pointers has increased consistently from 31.6% to 33.5%, reflecting a clear league-wide strategic shift toward perimeter-oriented basketball. However, overall scoring efficiency (points per FGA) has shown no net improvement over this period, returning to 1.22 in 2022 after peaking at 1.24 in 2021.

These findings reveal an important insight: while teams have successfully increased their reliance on three-point shooting, defenses have adapted sufficiently to prevent sustained efficiency gains. The data suggest the NBA may be reaching a strategic equilibrium where offensive and defensive innovations balance each other out.

These findings set the stage for Part 2 of this project, which will employ statistical inference to determine whether the observed changes in three-point proportion represent statistically significant shifts or could reasonably be attributed to chance variation. Understanding these trends has implications for team strategy, player evaluation, coaching decisions, and the future evolution of professional basketball.

\newpage

## References

Basketball Reference. (n.d.). *NBA & ABA League Index*. Sports Reference LLC. Retrieved from https://www.basketball-reference.com/

Basketball Reference. (n.d.). *NBA Per Game Stats*. Retrieved from https://www.basketball-reference.com/leagues/NBA_2019_per_game.html

ChatGPT . Used ChatGPT to help grammar check and format written responses as well as debugging plotGG code.

*Data files*: NBA2019.csv, NBA2020.csv, NBA2021.csv, NBA2022.csv (included in GitHub repository)