---
title: "Project Part 2" 

fontsize: 12pt
geometry: margin=1in
author: 'Prithvi Raj, Akhil Rachakonda, Shritan Goki'
urlcolor: black
output:
  pdf_document:
    latex_engine: xelatex
header-includes:
- \usepackage{setspace}
- \onehalfspacing
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, highlight=FALSE)
```

Link to Github Repository: <https://github.com/whozpj/DataToKnowledgeFinalProject---Prithvi-Raj-Akhil-Rachakonda-Shritan-Goki>

```{r, echo=FALSE, warning=FALSE, message=FALSE}
library(tidyverse)
library(knitr)
library(gridExtra)

nba_2019 <- read_csv("NBA2019.csv", show_col_types = FALSE) %>% mutate(Season = 2019)
nba_2020 <- read_csv("NBA2020.csv", show_col_types = FALSE) %>% mutate(Season = 2020)
nba_2021 <- read_csv("NBA2021.csv", show_col_types = FALSE) %>% mutate(Season = 2021)
nba_2022 <- read_csv("NBA2022.csv", show_col_types = FALSE) %>% mutate(Season = 2022)

nba_data <- bind_rows(nba_2019, nba_2020, nba_2021, nba_2022)

nba_clean <- nba_data %>%
  filter(!is.na(PTS), !is.na(FGA), !is.na(`3P`), FGA > 0)

season_stats <- nba_clean %>%
  group_by(Season) %>%
  summarise(
    Total_Points = sum(PTS, na.rm = TRUE),
    Total_3P_Points = sum(`3P` * 3, na.rm = TRUE),
    Total_FGA = sum(FGA, na.rm = TRUE),
    Total_FG = sum(FG, na.rm = TRUE),
    Prop_3P_Points = Total_3P_Points / Total_Points,
    Points_Per_FGA = Total_Points / Total_FGA,
    .groups = "drop"
  )

nba_2019_data <- nba_clean %>% filter(Season == 2019)
nba_2022_data <- nba_clean %>% filter(Season == 2022)

x1 <- sum(nba_2019_data$`3P` * 3, na.rm = TRUE)
n1 <- sum(nba_2019_data$PTS, na.rm = TRUE)
p1 <- x1 / n1

x2 <- sum(nba_2022_data$`3P` * 3, na.rm = TRUE)
n2 <- sum(nba_2022_data$PTS, na.rm = TRUE)
p2 <- x2 / n2

prop_test_result <- prop.test(x = c(x1, x2), n = c(n1, n2), alternative = "less", correct = FALSE)
```

## Introduction

This project tests whether the proportion of total NBA points scored from three-pointers increased from 2019 to 2022. Part 1 showed a small upward trend, but hypothesis testing is needed to determine whether the change is statistically significant.

Data were obtained from Basketball Reference and include all players from the 2018–19 and 2021–22 seasons(<https://www.basketball-reference.com/>) . For each season, we aggregated total points and total points from made three-pointers to compute the league-wide proportion of scoring from three-point shots.

The research question: **Has the proportion of points scored from three-pointers increased from 2019 to 2022?**

## Methods

### Test Selection

We used a two-sample z-test for proportions to compare the true proportion of points from three-pointers in 2019 and 2022. This test is appropriate for comparing proportions from two independent seasons with large sample sizes.

### Test Assumptions

The two-sample z-test for proportions requires three assumptions:

**1. Independent Samples**: The 2019 and 2022 NBA seasons are independent—distinct time periods with different rosters, schedules, and competitive contexts. Outcomes in 2019 do not influence 2022.

**2. Large Sample Sizes (Normality Assumption)**: According to standard statistical theory (Agresti & Franklin, 2013; Moore et al., 2017), the sampling distribution of the difference in sample proportions is approximately normal when both samples satisfy np ≥ 10 and n(1-p) ≥ 10.

For 2019: n₁ = `r format(round(n1, 0), big.mark = ",")`, x₁ = `r format(round(x1, 0), big.mark = ",")`, p₁ = `r round(p1, 4)`, n₁p₁ = `r format(round(n1 * p1, 0), big.mark = ",")` ≥ 10 ✓, n₁(1-p₁) = `r format(round(n1 * (1 - p1), 0), big.mark = ",")` ≥ 10 ✓

For 2022: n₂ = `r format(round(n2, 0), big.mark = ",")`, x₂ = `r format(round(x2, 0), big.mark = ",")`, p₂ = `r round(p2, 4)`, n₂p₂ = `r format(round(n2 * p2, 0), big.mark = ",")` ≥ 10 ✓, n₂(1-p₂) = `r format(round(n2 * (1 - p2), 0), big.mark = ",")` ≥ 10 ✓

To verify normality, a simulation of the sampling distribution was conducted:

```{r, echo=FALSE, fig.width=3.5, fig.height=2, fig.align='center', warning=FALSE}
set.seed(123)
n_sim <- 10000
diff_sim <- numeric(n_sim)
p_pooled <- (x1 + x2) / (n1 + n2)

for (i in 1:n_sim) {
  p1_sim <- rbinom(1, size = round(n1), prob = p_pooled) / round(n1)
  p2_sim <- rbinom(1, size = round(n2), prob = p_pooled) / round(n2)
  diff_sim[i] <- p2_sim - p1_sim
}

sim_data <- data.frame(diff = diff_sim)
mean_diff <- mean(diff_sim)
sd_diff <- sd(diff_sim)

ggplot(sim_data, aes(x = diff)) +
  geom_histogram(aes(y = after_stat(density)), bins = 50, fill = "steelblue", alpha = 0.7, color = "white") +
  stat_function(fun = dnorm, args = list(mean = mean_diff, sd = sd_diff), 
                color = "red", linewidth = 1.2) +
  labs(
    title = "Sampling Distribution of Difference in Proportions (p₂ - p₁)",
    subtitle = "Simulated under null hypothesis with normal distribution overlay",
    x = "Difference in Sample Proportions",
    y = "Density"
  ) +
  theme_minimal() +
  theme(
    plot.title = element_text(face = "bold", size = 10),
    plot.subtitle = element_text(size = 8),
    axis.title = element_text(size = 9)
  )
```

The histogram shows that the simulated sampling distribution closely follows a normal distribution (red curve), confirming the normality assumption. The large sample sizes ensure the Central Limit Theorem applies.

**3. Random Sampling**: While the data represent a population of all NBA players in these seasons, we treat the seasons as representative samples from the broader population of NBA seasons. The data collection process (official NBA statistics) ensures comprehensive and unbiased recording of all scoring events.

### Statistical Hypotheses

The statistical hypotheses corresponding to the research question are:

-   **H₀**: p₁ = p₂ (The proportion of points from three-pointers in 2019 equals the proportion in 2022)
-   **Hₐ**: p₁ \< p₂ (The proportion of points from three-pointers in 2019 is less than the proportion in 2022)

where p₁ represents the true proportion of total points scored from three-point field goals in the 2019 NBA season, and p₂ represents the true proportion in the 2022 NBA season. This is a one-sided test because the research question asks whether the proportion has *increased* from 2019 to 2022.

## Results

The two-sample z-test for proportions was conducted using R:

```{r}
prop_test_result <- prop.test(x = c(x1, x2), n = c(n1, n2), alternative = "less", correct = FALSE)
prop_test_result
```

The test output provides the following key components:

-   **Sample proportions**: The estimated proportion for 2019 is `r round(p1, 4)` (31.6%) and for 2022 is `r round(p2, 4)` (33.5%).
-   **Test statistic**: The z-statistic is `r round(prop_test_result$statistic, 4)`, calculated as the difference in sample proportions divided by the standard error of the difference.
-   **P-value**: The p-value for this one-sided test is `r format(prop_test_result$p.value, scientific = FALSE, digits = 6)`, representing the probability of observing a difference this large or larger if the true proportions were equal.
-   **95% confidence interval**: The confidence interval for the difference p₂ - p₁ is `r paste0("(", round(prop_test_result$conf.int[1], 6), ", ", round(prop_test_result$conf.int[2], 6), ")")`.

**Statistical result**: At a significance level of α = 0.05, we reject the null hypothesis (p = `r format(prop_test_result$p.value, scientific = FALSE, digits = 6)` \< 0.05). The p-value provides strong evidence against the null hypothesis that the proportions are equal. This indicates that the observed increase in the proportion of points from three-pointers from 2019 to 2022 is statistically significant and unlikely to have occurred by chance alone.

## Conclusions

The hypothesis test provides strong statistical evidence that the proportion of total points scored from three-point field goals has significantly increased in the NBA from 2019 to 2022. The test result (p = `r format(prop_test_result$p.value, scientific = FALSE, digits = 6)` \< 0.05) indicates that the observed increase from 31.6% to 33.5% represents a real shift in offensive strategy rather than random variation. This finding confirms that NBA teams have meaningfully increased their reliance on three-point shooting as a central component of their offensive systems.

The statistical significance of this change reflects a league-wide strategic shift toward perimeter-oriented basketball, driven by the mathematical advantage of three-pointers (worth 50% more than two-pointers) and the influence of analytics in team decision-making.

### Limitations

Limitations include: (1) only two seasons were compared; (2) pandemic-related seasons may affect comparability; and (3) league-wide totals mask team- and player-level differences.

### Generalization

The conclusion generalizes beyond the specific 2019 and 2022 seasons. The statistically significant increase suggests that the trend toward greater three-point emphasis is a real phenomenon in modern NBA basketball, not merely a feature of these two particular seasons. The results can be generalized to future NBA seasons, similar competitive contexts, and strategic decision-making. However, generalization should be tempered by recognition that the NBA is a dynamic system where defensive adaptations, rule changes, or other factors could alter the trajectory of three-point emphasis.

\newpage

## References

Agresti, A., & Franklin, C. (2013). *Statistics: The Art and Science of Learning from Data* (3rd ed.). Pearson.

Basketball Reference. (n.d.). *NBA & ABA League Index*. Sports Reference LLC. Retrieved from <https://www.basketball-reference.com/>

Basketball Reference. (n.d.). *NBA Per Game Stats*. Retrieved from <https://www.basketball-reference.com/leagues/NBA_2019_per_game.html>

Moore, D. S., Notz, W. I., & Fligner, M. A. (2017). *The Basic Practice of Statistics* (8th ed.). W. H. Freeman.

*Data files*: NBA2019.csv, NBA2020.csv, NBA2021.csv, NBA2022.csv (included in GitHub repository)

*AI tools were used to assist with code development and report writing.*
